<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

<title>Template</title>

<link rel="stylesheet" href="node_modules/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="Hematite-light.css" id="light_colors">
<link rel="stylesheet" href="Hematite-dark.css" id="dark_colors">
<link rel="stylesheet" href="Hematite.css">

<style type='text/css'>
.panel {
  position: relative;
  top: 150px;
  left: calc(50% - 132px);
  width: 300px;
  margin-bottom: 12px;
}

#check {
  position: absolute;
  left: 100px;
}
</style>

<script type="text/javascript">
// Frame buster
if(top !== self) {
  top.location.replace(self.location.href);
}
</script>

<script type="text/javascript" src="Hematite.pkgd.js"></script>
</head>

<body>

<div id="background">
</div>

<input type="checkbox" id="check" class="fa button fa-flask">C</input>

</body>

<script type="text/javascript">

///////////////
// Utilities //
///////////////

// Daisy-chainable HTMLElement maker
var fE = Hematite.forgeElement;

///////////////
// Instances //
///////////////

var sidebar = new Hematite.Sidebar();
sidebar.addButton({name: 'instant'  ,                        faClass: 'fa-university',                            title: 'Instant for testing'        }).id = 'instant' ;
sidebar.addButton({name: 'toggle_1' , type: Hematite.TOGGLE, faClass: 'fa-flask'     , faClassAlt: 'fa-fire'    , title: 'Toggle for testing'         }).id = 'toggle_1';
sidebar.addButton({name: 'toggle_2' , type: Hematite.TOGGLE, char   : 'T'            , charAlt   : 'U'          , title: 'This toggle uses char icons'}).id = 'toggle_2';
sidebar.addButton({name: 'toggle_m1', type: Hematite.TOGGLE, faClass: 'fa-flask'     , faClassAlt: 'fa-fire'    , title: 'This toggle is not auto'    , manual: true}).id = 'toggle_m1';
sidebar.addButton({name: 'toggle_m2', type: Hematite.TOGGLE, char   : 'V'            , charAlt   : 'W'          , title: 'This toggle is not auto'    , manual: true}).id = 'toggle_m2';
sidebar.addButton({name: 'select_1' , type: Hematite.SELECT, char   : '4'            ,                            title: 'For testing selects'        }).id = 'select_1';
sidebar.addButton({name: 'select_2' , type: Hematite.SELECT, char   : '5'            ,                            title: 'For testing selects'        }).id = 'select_2';
sidebar.addButton({name: 'select_3' , type: Hematite.SELECT, char   : '6'            ,                            title: 'For testing selects'        }).id = 'select_3';
sidebar.addButton({name: 'contrast' , type: Hematite.TOGGLE, faClass: 'fa-adjust'    , faClassAlt: 'fa-circle-o', title: 'Flip contrast'              }).id = 'contrast';
sidebar.addButton({name: 'clear'    ,                        faClass: 'fa-recycle'   ,                            title: 'Clear local storage'        }).id = 'clear'   ;

var examplePanel = new Hematite.Panel({id: 'panel_test', heading: 'Here is a panel', closeButton: true});
examplePanel.domElement.appendChild(fE('div', {textContent: 'Stuff can go here'}));
examplePanel.open();

var darkColors = document.getElementById('dark_colors');

////////////
// Events //
////////////

var records = {
  lastTrigger: '',
  triggerCount: 0,
  lastToggleon: '',
  toggleonCount: 0,
  lastToggleoff: '',
  toggleoffCount: 0,
  lastSelect: '',
  selectCount: 0,
  lastUnselect: '',
  unselectCount: 0,
  lastName: '',
  nameCount: 0,
}

sidebar.on('trigger', function(e) {
  records.lastTrigger = e.target.name;
  ++records.triggerCount;
});

sidebar.on('toggleon', function(e) {
  records.lastToggleon = e.target.name;
  ++records.toggleonCount;
});

sidebar.on('toggleoff', function(e) {
  records.lastToggleoff = e.target.name;
  ++records.toggleoffCount;
});

sidebar.on('select', function(e) {
  records.lastSelect = e.target.name;
  ++records.selectCount;
});

sidebar.on('unselect', function(e) {
  records.lastUnselect = e.target.name;
  ++records.unselectCount;
});

for(var i = 0; i < sidebar.domElement.children.length; ++i) {
  sidebar.on(sidebar.domElement.children[i].name, function(e) {
    records.lastName = e.target.name;
    ++records.nameCount;
  });
}

sidebar.on('contrast', function(e) {
  if(e.target.state) {
    document.head.removeChild(darkColors);
    localStorage.contrast = 'light';
  } else {
    document.head.appendChild(darkColors);
    localStorage.contrast = 'dark';
  }
});

sidebar.on('clear', function() {
  localStorage.clear();
});

////////////////////
// Initialization //
////////////////////

if(localStorage.contrast === 'light') {
  document.head.removeChild(darkColors);
}

</script>
</html>
